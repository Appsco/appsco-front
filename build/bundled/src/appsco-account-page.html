<html><head><meta charset="UTF-8"><link rel="import" href="appsco-app.html"></head><body><div hidden="" by-vulcanize=""><dom-module id="appsco-account-authorized-app" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: none;
                padding: 16px 0 10px 6px;
                border-top: 1px solid var(--divider-color);
                @apply(--account-authorized-app);

            --paper-icon-button: {
                 width: 32px;
                 height: 32px;
             };

            --iron-image-height: 32px;
            }
            :host .application {
                position: relative;
                padding-top: 20px;
                @apply(--layout-horizontal);
                @apply(--layout-center);
                @apply(--authorized-app);
            }
            :host .application-info-container {
                @apply(--layout-vertical);
                @apply(--layout-flex);
            }
            :host .application-basic {
                @apply(--layout-horizontal);
                @apply(--layout-center);
            }
            :host .application-date {
                font-size: 11px;
                position: absolute;
                top: 5px;
                right: 6px;
                opacity: 0.5;
                @apply(--authorized-app-date);
            }
            :host .application-icon {
                min-width: 32px;
                margin-right: 10px;
                @apply(--layout-flex-none);
                @apply(--authorized-app-icon);
            }
            :host .application-info {
                @apply(--layout-vertical);
                @apply(--authorized-app-info);
            }
            :host .application-title {
                @apply(--authorized-app-title);
            }
            :host .application-scope {
                font-size: 12px;
                opacity: 0.6;
            }
            :host .revoke-action {
                opacity: 0.6;
            }
            :host .application-additional {
                margin-top: 10px;
                font-size: 12px;
                opacity: 0.8;
                @apply(--layout-vertical);
                @apply(--authorized-app-additional-info);
            }
            :host .application-description {
                margin-top: 4px;
            }
            :host .application-info-value {
                opacity: 0.6;
            }
            :host iron-image::shadow img {
                max-width: 100%;
            }
            :host([short-view]) {
                padding: 6px;
            }
            :host([short-view]) .application {
                padding-top: 0;
            }
            :host([short-view]) .application-date, :host([short-view]) .revoke-action, :host([short-view]) .application-additional {
                display: none;
            }
            :host .revoke-action {
                font-size: 12px;
            }
        </style>

        <div class="application">
            <div class="application-date">[[ _dateFormat(application.created.date) ]]</div>

            <div class="application-info-container">
                <div class="application-basic">

                    <template is="dom-if" if="[[ application.icon_url ]]">
                        <iron-image preload="" fade="" placeholder="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAIAAgAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/T2iiitTIKKKKACiiigAooooA//Z" src="[[ application.icon_url ]]" class="application-icon" hidden$="[[ !application.icon_url ]]">
                        </iron-image>
                    </template>

                    <div class="application-info">
                        <div class="application-title">[[ application.title ]]</div>
                        <div class="application-scope">Access: [[ application.scopes ]]</div>
                    </div>
                </div>

                <div class="application-additional">

                    <template is="dom-if" if="[[ application.website ]]">
                        <div class="application-website">
                            Website:
                            <br>
                            <span class="application-info-value">[[ application.website ]]</span>
                        </div>
                    </template>

                    <template is="dom-if" if="[[ application.description ]]">
                        <div class="application-description">
                            Description:
                            <br>
                            <span class="application-info-value">[[ application.description ]]</span>
                        </div>
                    </template>
                </div>
            </div>

            <paper-button on-tap="_onRevokeAction" class="revoke-action">Revoke</paper-button>
        </div>

    </template>

    <script>Polymer({is:"appsco-account-authorized-app",properties:{application:{type:Object,value:function(){return{}}},shortView:{type:Boolean,value:!1,reflectToAttribute:!0},animationConfig:{value:function(){return{entry:{name:"fade-in-animation",node:this,timing:{duration:200}},exit:{name:"fade-out-animation",node:this,timing:{duration:100}}}}}},behaviors:[Polymer.NeonAnimationRunnerBehavior],attached:function(){this.style.display="block",this.playAnimation("entry")},_dateFormat:function(i){if(i){var t={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(i).toLocaleDateString("en",t)}},_onRevokeAction:function(){this.fire("revoke-authorized-application",{application:this.application})}});</script>
</dom-module>
<dom-module id="appsco-account-authorized-apps" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: block;
                position: relative;
                width: 100%;
            @apply(--account-authorized-apps);
            }
            .authorized-apps {
                padding-top: 10px;
                position: relative;
            @apply(--layout-vertical);
            @apply(--account-authorized-apps-container);
            }
            :host .message {
                color: var(--secondary-text-color);
                font-style: italic;
            @apply(--paper-font-body2);
            @apply(--info-message);
            }
            :host paper-progress {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                margin: auto;
                width: 100%;
            @apply(--account-authorized-apps-paper-progress);
            }
            :host appsco-account-authorized-app {
            @apply(--account-authorized-app);
            }
            :host appsco-account-authorized-app:first-of-type {
            @apply(--account-authorized-app-first);
            }
            :host .load-more-button {
                display: block;
                width: 120px;
                margin: 20px auto 0;
                text-align: center;
                @apply(--load-more-button);
            }
        </style>

        <iron-ajax id="ironAjaxAuthorizedApps" url="{{ _computedUrl }}" method="GET" headers="{{ _computedHeaders }}" handle-as="json" on-error="_handleError" on-response="_handleResponse">
        </iron-ajax>

        <div class="authorized-apps">

            <paper-progress id="progress" indeterminate=""></paper-progress>

            <template is="dom-repeat" items="{{ _authorizedApps }}">

                <appsco-account-authorized-app application="[[ item ]]" short-view="[[ shortView ]]"></appsco-account-authorized-app>

            </template>

            <template is="dom-if" if="[[ _message ]]">
                <p class="message">
                    [[ _message ]]
                </p>
            </template>

            <paper-button id="loadMore" class="load-more-button" hidden="[[ !loadMore ]]" on-tap="_loadMore">Load More</paper-button>

        </div>
    </template>

    <script>Polymer({is:"appsco-account-authorized-apps",properties:{account:{type:Object,value:function(){return{}},notify:!0},authorizationToken:{type:String},authorizedAppsApi:{type:String},_nextPage:{type:Number,value:1},size:{type:Number,value:5},loadMore:{type:Boolean,value:!1},shortView:{type:Boolean,value:!1},_computedUrl:{type:String,computed:"_computeUrl(authorizedAppsApi)"},_computedHeaders:{type:Object,computed:"_computeHeaders(authorizationToken)"},_authorizedApps:{type:Array,value:function(){return[]},notify:!0},_message:{type:String}},_computeUrl:function(e){return e+"?page="+this._nextPage+"&limit="+this.size},_computeHeaders:function(e){return{Authorization:"token "+e}},loadAuthorizedApps:function(){this.$.progress.hidden=!1,this._authorizedApps=[],this._nextPage=1,this.$.ironAjaxAuthorizedApps.url=this._computeUrl(this.authorizedAppsApi),this.$.ironAjaxAuthorizedApps.generateRequest()},_loadMore:function(){this.$.progress.hidden=!1,this.$.ironAjaxAuthorizedApps.url=this._computeUrl(this.authorizedAppsApi),this.$.ironAjaxAuthorizedApps.generateRequest()},_handleError:function(e){this._message="We couldn't load applications at the moment. Please try again in a minute. If error continues contact us.",this._hideProgressBar()},_handleResponse:function(e){var t=e.detail.response,i=t.authorizations,o=this._authorizedApps.length;i&&i.length>0?(this._nextPage+=1,i.forEach(function(e,t){setTimeout(function(){this.push("_authorizedApps",i[t]),t===i.length-1&&(this._hideProgressBar(),i.length<this.size&&(this.$.loadMore.disabled=!0))}.bind(this),50*(t+1))}.bind(this))):i&&!i.length?(o?this.$.loadMore.disabled=!0:this._message="You don't have authorized applications.",this._hideProgressBar()):o||(this._message="We couldn't load applications at the moment.",this._hideProgressBar())},_hideProgressBar:function(){setTimeout(function(){this.$.progress.hidden=!0}.bind(this),500)}});</script>
</dom-module>
<dom-module id="appsco-account-partner" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: block;

            @apply(--appsco-account-partner);

                --iron-image-height: 32px;
            }
            :host .partner {
                position: relative;
                font-size: 14px;
            @apply(--layout-horizontal);
            @apply(--layout-center);
            @apply(--partner);
            }
            :host .partner-container {
            @apply(--layout-vertical);
            @apply(--layout-flex);
            }
            :host .basic-info {
            @apply(--layout-horizontal);
            @apply(--layout-center);
            }
            :host .partner-logo {
                min-width: 32px;
                margin-right: 10px;
            @apply(--layout-flex-none);
            @apply(--partner-logo);
            }
            :host .partner-info {
                padding-top: 1px;
            @apply(--layout-flex);
            @apply(--partner-info);
            }
            :host .partner-name {
                font-size: 16px;
                line-height: 16px;
            @apply(--partner-name);
            }
            :host .additional-info {
                margin-top: 10px;
            @apply(--layout-vertical);
            @apply(--partner-additional-info);
            }
            :host .partner-info-value {
            @apply(--partner-additional-info-value);
            }
            :host .partner-company-number {
                margin-top: 4px;
            }
            :host iron-image::shadow img {
                max-width: 100%;
            }
        </style>

        <div class="partner">

            <div class="partner-container">
                <div class="basic-info">

                    <template is="dom-if" if="[[ partner.company_logo ]]">
                        <iron-image preload="" fade="" placeholder="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAIAAgAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/T2iiitTIKKKKACiiigAooooA//Z" src="[[ partner.company_logo ]]" class="partner-logo">
                        </iron-image>
                    </template>

                    <div class="partner-info">
                        <div class="partner-name">[[ partner.company_name ]]</div>
                        <div class="partner-address">Address: [[ partner.address ]]</div>
                    </div>
                </div>

                <div class="additional-info">

                    <template is="dom-if" if="[[ partner.contact_email ]]">
                        <div class="partner-contact">
                            Contact:
                            <br>
                            <a href="mailto:[[ partner.contact_email ]]" class="partner-info-value">[[ partner.contact_email ]]</a>
                        </div>
                    </template>

                    <template is="dom-if" if="[[ partner.company_number ]]">
                        <div class="partner-company-number">
                            Company number:
                            <br>
                            <span class="partner-info-value">[[ partner.company_number ]]</span>
                        </div>
                    </template>
                </div>
            </div>

        </div>

    </template>

    <script>Polymer({is:"appsco-account-partner",properties:{partner:{type:Object}}});</script>
</dom-module>
<dom-module id="appsco-account-components-page" assetpath="account/">
    <template>
        <style>
            :host {
                display: block;
                overflow-y: auto;
                @apply(--layout-horizontal);
                @apply(--layout-wrap);
                @apply(--layout-justified);
                font-size: 14px;
                color: var(--primary-text-color);

                --paper-button: {
                     padding: 6px 0;
                     margin: 0;
                     border-radius: 0;
                     width: 100%;
                     color: var(--primary-text-color);
                 };

                --account-details-value: {
                     font-size: 14px;
                 };

                --iron-icon-height: 20px;
                --iron-icon-width: 20px;
                --iron-icon: {
                     margin-top: -3px;
                 };
            }
            :host > * {
                width: calc(100% / 3 - 10px);
                margin-bottom: 10px;
                @apply(--layout-self-start);
            }
            paper-card {
                 min-height: 150px;
                 box-sizing: border-box;

                --paper-card-content: {
                     min-height: 70px;
                     box-sizing: border-box;
                 };
                --paper-card-actions: {
                     padding: 0;
                     border-color: var(--divider-color);
                 };
                --paper-card-header-text: {
                     padding: 8px 16px;
                     font-size: 18px;
                     color: var(--primary-text-color);
                     border-bottom: 1px solid var(--divider-color);
                 };
            }
            appsco-account-details {
                --account-detail-container: {
                     margin: 4px 0;
                 };

                --account-details-label: {
                     font-size: 12px;
                     line-height: 16px;
                 };
                --account-details-value: {
                     font-size: 14px;
                     line-height: 22px;
                 };
            }
            .icon-enabled {
                --iron-icon-fill-color: var(--icon-success-color, #0f9d58);
            }
            .icon-disabled {
                --iron-icon-fill-color: var(--icon-danger-color, #db4437);
            }
            .info-2fa {
                  margin-top: 10px;
            }
            .appsco-account-notifications, .appsco-account-authorized-apps, .appsco-account-log {
                --paper-card-content: {
                     min-height: 70px;
                     padding-top: 0;
                     padding-bottom: 0;
                     box-sizing: border-box;
                 };
            }
            appsco-account-notifications {
                --appsco-account-notifications-container: {
                     padding-top: 4px;
                 };
                --appsco-account-notifications-paper-progress: {
                     top: 4px;
                 };
                --account-notifications-appsco-list-item: {
                     padding: 16px 6px 6px 6px;
                 };
                --account-notifications-appsco-list-item-first: {
                     border-top: none;
                 };
                --appsco-list-item-date: {
                     top: 2px;
                 };
            }
            appsco-account-authorized-apps {
                --account-authorized-apps-container: {
                     padding-top: 4px;
                 };

                --account-authorized-apps-paper-progress: {
                     top: 4px;
                 };
                --paper-progress-container-color: var(--app-primary-color);
                --paper-progress-active-color: #ffffff;

                --account-authorized-app-first: {
                     border-top: none;
                 };
            }
            appsco-account-log {
                --appsco-account-log-container: {
                     padding-top: 4px;
                 };
                --account-log-paper-progress: {
                     top: 4px;
                 };
                --appsco-account-log-item: {
                     padding: 16px 6px 8px 6px;
                 };
                --appsco-account-log-item-first: {
                     border-top: none;
                 };
                --log-item-date: {
                     top: 2px;
                 };
            }
            appsco-account-partner {
                --partner-additional-info-value: {
                     color: inherit;
                 };
            }
            .details-2fa, .notifications-authorized-apps, .log-partner {
                @apply(--layout-vertical);
            }
            .details-2fa, .notifications-authorized-apps {
                margin-right: 10px;
            }
            .appsco-account-details, .appsco-account-notifications, .appsco-account-log {
                margin-bottom: 10px;
            }
            :host([medium-screen]) > * {
                width: calc(100% / 2 - 10px);
            }
            :host([medium-screen]) .notifications-authorized-apps {
                margin-right: 0;
            }
            :host([medium-screen]) > .log-partner {
                @apply(--layout-horizontal);
                @apply(--layout-start);
                width: 100%;
            }
            :host([medium-screen]) > .log-partner paper-card {
                @apply(--layout-flex);
            }
            :host([medium-screen]) > .log-partner .appsco-account-log {
                margin-right: 20px;
            }
            :host([tablet-screen]) > .log-partner {
                @apply(--layout-vertical);
            }
            :host([tablet-screen]) > .log-partner paper-card {
                @apply(--layout-flex-none);
                width: 100%;
            }
            :host([tablet-screen]) > .log-partner .appsco-account-log {
                margin-right: 0;
            }
            :host([tablet-screen]) > * {
                width: 100%;
            }
            :host([tablet-screen]) .details-2fa {
                margin-right: 0;
            }
            .appsco-account-authorized-apps, .appsco-account-partner {
                opacity: 0;
                visibility: hidden;
                min-height: inherit;
                height: 0;
                overflow: hidden;

                --paper-card-header-text: {
                     padding: 8px 16px;
                     font-size: 18px;
                     color: var(--success-color);
                     border-bottom: 1px solid var(--success-color);
                 };
            }
            .appsco-account-authorized-apps, .appsco-account-partner {
                transition: opacity 0.2s ease-out;
            }
            .appsco-account-authorized-apps paper-button, .appsco-account-partner paper-button {
                color: var(--success-color);
            }
            :host([_advanced-settings]) .appsco-account-authorized-apps, :host([_advanced-settings]) .appsco-account-partner {
                opacity: 1;
                visibility: visible;
                height: auto;
            }
            :host([_advanced-settings]) .appsco-account-authorized-apps {
                transition: opacity 0.3s ease-in;
            }
            :host([_advanced-settings]) .appsco-account-partner {
                transition: opacity 0.3s ease-in;
            }
            .message {
                @apply(--info-message);
            }
            .card-content-no-padding .message {
                margin: 0;
            }
        </style>

        <iron-media-query query="(max-width: 1200px)" query-matches="{{ mediumScreen }}"></iron-media-query>
        <iron-media-query query="(max-width: 800px)" query-matches="{{ tabletScreen }}"></iron-media-query>

        <iron-ajax auto="" id="twofaapi" url="[[ twoFaApi ]]" on-response="_on2FAResponse" headers="{{ _computedHeaders }}">
        </iron-ajax>

        <div class="details-2fa">
            <paper-card heading="Settings" class="appsco-account-details">
                <div class="card-content">
                    <appsco-account-details account="{{ account }}">
                    </appsco-account-details>
                </div>

                <div class="card-actions">
                    <paper-button on-tap="_onAccountManageSettings">Manage</paper-button>
                </div>
            </paper-card>

            <paper-card heading="Two Factor Authentication" class="appsco-account-2fa">
                <div class="card-content">
                    <div class="status-2fa">

                        <template is="dom-if" if="[[ _twoFAEnabled ]]">
                            <iron-icon icon="check" class="icon-enabled"></iron-icon> Enabled
                        </template>

                        <template is="dom-if" if="[[ !_twoFAEnabled ]]">
                            <iron-icon icon="clear" class="icon-disabled"></iron-icon> Disabled
                        </template>
                    </div>

                    <div class="info-2fa">
                        Recovery codes can be used to access your account in the event you lose access to your device and cannot receive two-factor authentication codes.
                        Appsco Support cannot restore access to your accounts with two-factor authentication enabled for security reasons.
                        Saving your recovery codes in a safe place can keep you from being locked out of your account.
                    </div>
                </div>

                <div class="card-actions">
                    <template is="dom-if" if="[[ _twoFAEnabled ]]">
                        <paper-button on-tap="_on2FAManage">Manage</paper-button>
                    </template>

                    <template is="dom-if" if="[[ !_twoFAEnabled ]]">
                        <paper-button on-tap="_on2FAEnable">Enable</paper-button>
                    </template>
                </div>
            </paper-card>
        </div>

        <div class="notifications-authorized-apps">
            <paper-card heading="Notifications" class="appsco-account-notifications">
                <div class="card-content">
                        <appsco-account-notifications id="appscoAccountNotifications" authorization-token="[[ authorizationToken ]]" notifications-api="[[ notificationsApi ]]" size="5" on-new-notifications="_loadNotifications">
                        </appsco-account-notifications>
                </div>

                <div class="card-actions">
                    <paper-button on-tap="_onAccountNotifications">ALL</paper-button>
                </div>
            </paper-card>

            <paper-card heading="Authorized apps" id="appscoAccountAuthorizedAppsCard" class="appsco-account-authorized-apps">
                <div class="card-content">
                    <appsco-account-authorized-apps id="appscoAccountAuthorizedApps" account="[[ account ]]" authorization-token="[[ authorizationToken ]]" authorized-apps-api="[[ authorizedAppsApi ]]" size="5" short-view="">
                    </appsco-account-authorized-apps>
                </div>

                <div class="card-actions">
                    <paper-button on-tap="_onManageAuthorizedApps">Manage</paper-button>
                </div>
            </paper-card>
        </div>

        <div class="log-partner">
            <paper-card heading="Activity log" class="appsco-account-log">
                <div class="card-content">
                    <appsco-account-log id="appscoAccountLog" account="[[ account ]]" authorization-token="[[ authorizationToken ]]" log-api="[[ logApi ]]" size="5" short-view="">
                    </appsco-account-log>
                </div>

                <div class="card-actions">
                    <paper-button on-tap="_onAccountLog">ALL</paper-button>
                </div>
            </paper-card>

            <paper-card heading="Partner" id="appscoAccountPartnerCard" class="appsco-account-partner">

                <template is="dom-if" if="[[ _partnerExists ]]">
                    <div class="card-content">
                        <appsco-account-partner id="appscoAccountPartner" partner="[[ partner ]]"></appsco-account-partner>
                    </div>
                </template>

                <template is="dom-if" if="[[ !_partnerExists ]]">
                    <div class="card-content card-content-no-padding">
                        <p class="message">
                            You don't have a partner.
                        </p>
                    </div>
                </template>

                <div class="card-actions">
                    <paper-button on-tap="_onManagePartner">Manage</paper-button>
                </div>
            </paper-card>
        </div>

    </template>

    <script>Polymer({is:"appsco-account-components-page",properties:{account:{type:Object,value:function(){return{}},notify:!0},partner:{type:Object,value:function(){return{}},notify:!0},_partnerExists:{type:Boolean,computed:"_computePartnerExists(partner)"},authorizationToken:{type:String},notificationsApi:{type:String},authorizedAppsApi:{type:String},logApi:{type:String},twoFaApi:{type:String},_computedHeaders:{type:Object,computed:"_computeHeaders(authorizationToken)"},_advancedSettings:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_onAdvancedSettingsChange"},_twoFAEnabled:{type:Boolean,value:!1},mediumScreen:{type:Boolean,value:!1,reflectToAttribute:!0},tabletScreen:{type:Boolean,value:!1,reflectToAttribute:!0},animationConfig:{value:function(){return{entry:[{name:"cascaded-animation",animation:"fade-in-animation",nodes:Polymer.dom(this.root).querySelectorAll("paper-card"),nodeDelay:50,timing:{delay:200,duration:100}}],exit:[{name:"hero-animation",id:"hero",fromPage:this},{name:"fade-out-animation",node:this,timing:{duration:500}}]}}}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],observers:["_updateScreen(tabletScreen, mediumScreen)"],attached:function(){(this.tabletScreen||this.mediumScreen)&&this.updateStyles(),this._loadNotifications(),this.loadLog(),this._advancedSettings&&this.loadAuthorizedApps()},_updateScreen:function(t,e){this.updateStyles()},_computeHeaders:function(t){return{Authorization:"token "+t}},_computePartnerExists:function(t){for(key in t)return!0;return!1},setSharedElement:function(t,e){switch(t){case"notifications":this.sharedElements={hero:this.$.appscoAccountNotifications}}},_setSharedElement:function(t){for(;"paper-card"!==t.tagName.toLowerCase()&&!t._templateInstance;)t=t.parentNode;this.sharedElements={hero:t}},_loadNotifications:function(){this.$.appscoAccountNotifications.loadNotifications()},loadLog:function(){this.$.appscoAccountLog.loadLog()},load2FaApi:function(){this.$.twofaapi.generateRequest()},loadAuthorizedApps:function(){this.$$("#appscoAccountAuthorizedApps").loadAuthorizedApps()},toggleAdvancedSettings:function(){this.set("_advancedSettings",!this._advancedSettings)},showAdvancedSettings:function(){this.set("_advancedSettings",!0)},hideAdvancedSettings:function(){this.set("_advancedSettings",!1)},_onAdvancedSettingsChange:function(){this._advancedSettings&&this.loadAuthorizedApps()},_on2FAResponse:function(t){this._twoFAEnabled=t.detail.response.enabled},_onAccountManageSettings:function(t){this._setSharedElement(t.target),this.fire("account-settings")},_onAllLog:function(t){this._setSharedElement(t.target),this.fire("all-log")},_on2FAEnable:function(t){this._setSharedElement(t.target),this.fire("2fa-enable")},_on2FAManage:function(t){this._setSharedElement(t.target),this.fire("2fa-manage")},_onAccountNotifications:function(t){this._setSharedElement(t.target),this.fire("all-notifications")},_onManageAuthorizedApps:function(t){this._setSharedElement(t.target),this.fire("manage-authorized-apps")},_onAccountLog:function(t){this._setSharedElement(t.target),this.fire("whole-log")},_onManagePartner:function(t){this._setSharedElement(t.target),this.fire("manage-partner")}});</script>
</dom-module>

<dom-module id="appsco-account-2fa-enable" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: block;
            @apply(--paper-font-common-base);
                color: var(--primary-text-color);
                /*@apply(--layout-horizontal);*/
                /*@apply(--layout-center);*/
                /*@apply(--layout-end-justified);*/
                /*@apply(--appsco-account-2fa-enable);*/
                overflow: hidden;
            }
            :host a {
                text-decoration: none;
                color: black;
            }
            :host ul[progress] {
            @apply(--layout-horizontal);
                list-style: none;
                width: 100%;
                margin: 0;
                padding: 0;
                z-index: 1;
                position: relative;
            }
            :host ul[progress] li {
                /*border-bottom: 1px solid black;*/
                width: calc(100%/3);
                text-align: center;
            }
            :host ul[progress] li > a {
                display: block;
            }
            :host ul[progress] li > a {
                text-decoration: none;
                color: black;;
            }
            :host #progress {
                width: 100%;
                position: relative;
            }
            :host #progress paper-progress {
                width: calc(100%/3*2);
                position: absolute;
                top: 14px;
                left: calc(100%/3/2);
                z-index: 0;
                opacity:0.7;
                --paper-progress-active-color: var(--appsco-account-2fa-enabled-progress-color, #00acc1);
                --paper-progress-height: 6px;
            }
            :host span[step] {
                display: block;
            @apply(--paper-font-subhead);
            }
            :host span.step-number {
                border-radius: 50%;
                width: 28px;
                height: 28px;
            @apply(--paper-font-menu);
                display: inline-block;
                line-height: 28px;
                border: 4px solid #e5e6e6;
                background: #ffffff;
                transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
            }
            :host span.step-number:hover {
                border-color: var(--appsco-account-2fa-enabled-progress-color, #00acc1);
            }
            :host li[active] span.step-number {
                border-color: var(--appsco-account-2fa-enabled-progress-color, #00acc1);
            }
            :host li[done] span.step-number {
                border-color: var(--appsco-account-2fa-enabled-progress-color, #00acc1);
                background-color: var(--appsco-account-2fa-enabled-progress-color, #00acc1);
                color: #ffffff;
            }
            :host .auth-step {
                /*display: none;*/
                width:33%;
                display: inline-block;
                vertical-align: top;
                position: relative;
                height: 350px;
            }
            :host .auth-step:nth-child(1){
                width:calc(34% - 7px);
            }
            :host #step1 {
                /*display: block;*/
            }
            :host .authentication-wizard {
                width: 300%;
                position: relative;
                left:0;
                transition: left 0.3s ease;
            }
            :host .authentication-wizard.step2 {
                left:-100%;
            }
            :host .authentication-wizard.step3 {
                left:-200%;
            }
            :host .step-actions {
                position: absolute;
                bottom:0;
                left:0;
                right: 0;
            }
            :host .flex-left {
                /*@apply(--layout);*/
                /*@apply(--layout-start);*/
                /*@apply(--layout-start-justified);*/
                float: left;
            }
            :host .flex-right {
                /*@apply(--layout);*/
                /*@apply(--layout-end);*/
                /*@apply(--layout-end-justified);*/
                float: right;
            }
            :host .save {
                /*background-color: var(--appsco-account-2fa-enabled-save-button, #00acc1);*/
            }
            :host iron-icon {
                width: 64px;
                height: 64px;
                margin: 20px;
            @apply(--account-2fa-enable-setup-icon);
            }
        </style>
        <div id="progress">
            <ul progress="">
                <li active=""><a href="#" on-tap="_active1">
                    <span step="" class="step-number">1</span>
                    <span step="" class="step-text">Set up</span>
                </a>
                </li>
                <li><a href="#" on-tap="_active2">
                    <span step="" class="step-number">2</span>
                    <span step="" class="step-text">Scan</span>
                </a>
                </li>
                <li><a href="#" on-tap="_active3">
                    <span step="" class="step-number">3</span>
                    <span step="" class="step-text">Verify</span>
                </a>
                </li>
            </ul>
            <paper-progress value="0" class="transiting" id="progressBar"></paper-progress>
        </div>
        <div class="authentication-wizard" id="authenticationWizard">
            <div class="auth-step" id="step1">
                <h2 style="text-align: center">Set up an Authenticator</h2>
                <div style="text-align: center">
                    <iron-icon icon="hardware:security" alt="Enter your code" class="big"></iron-icon>
                    <p>
                        To use two-factor verification you will need to download Google Authenticator for your
                    </p>
                    <p>
                        <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en" tabindex="-1" target="_blank">
                            <paper-button raised="">Android</paper-button>
                        </a>
                        <a href="https://itunes.apple.com/en/app/google-authenticator/id388497605?mt=8" tabindex="-1" target="_blank">
                            <paper-button raised="">iPhone</paper-button>
                        </a>
                        <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en" tabindex="-1" target="_blank">
                            <paper-button raised="">Windows Phone</paper-button>
                        </a>
                        <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en" tabindex="-1" target="_blank">
                            <paper-button raised="">Blackberry</paper-button>
                        </a>
                    </p>
                </div>
                <div class="step-actions">
                    <div class="flex-right">
                        <paper-button on-tap="_active2">Next</paper-button>
                    </div>
                </div>
            </div>
            <div style="text-align: center" class="auth-step" id="step2">
                <h2 style="text-align: center">Scan the QR code below</h2>
                <div class="auth-step-content">
                    <iron-image style="width:64px; height:64px; margin:20px; background-color: white" sizing="cover" preload="" src="[[ qrCode ]]" alt="Scan QR code"></iron-image>
                    <p>
                        Open your Authenticator app and scan the code with camera on your phone. You may also enter the code manually:
                    </p>
                    <h3>
                        [[ qrSecret ]]
                    </h3>

                </div>
                <div class="step-actions">
                    <div class="flex-left">
                        <paper-button on-tap="_active1">Previous</paper-button>
                    </div>
                    <div class="flex-right">
                        <paper-button on-tap="_active3">Next</paper-button>
                    </div>
                </div>
            </div>
            <div class="auth-step" id="step3">
                <h2 style="text-align: center">Enter your code</h2>
                <div style="text-align: center" class="auth-step-content">
                    <iron-icon icon="hardware:smartphone" alt="Enter your code" class="big"></iron-icon>
                    
                    
                    
                    
                    <p>
                        Enter the 6-digit verification code generated by your Authenticator app.
                    </p>
                    <div style="display: inline-block">
                        <paper-input id="verificationCode" label="Verification code" char-counter="" maxlength="6" auto-validate="" pattern="[0-9]*" error-message="Digits only!" on-focus="_inputFocused"></paper-input>
                    </div>
                    
                    
                </div>
                <div class="step-actions">
                    <div class="flex-left">
                        <paper-button on-tap="_active2">Previous</paper-button>
                    </div>
                    <div class="flex-right">
                        <paper-button on-tap="_activate" class="save">Save</paper-button>
                    </div>
                </div>
            </div>
        </div>

    </template>

    <script>Polymer({is:"appsco-account-2fa-enable",behaviors:[Polymer.NeonAnimationRunnerBehavior],_active1:function(){this.$.progress.querySelector("li:first-child").setAttribute("active",!0),this.$.progress.querySelector("li:first-child").removeAttribute("done",!0),this.$.progress.querySelector("li:nth-child(2)").removeAttribute("done",!0),this.$.progress.querySelector("li:nth-child(2)").removeAttribute("active",!0),this.$.progress.querySelector("li:last-child").removeAttribute("active",!0),this.$.progress.querySelector("li:last-child").removeAttribute("done",!0),this.$.progressBar.value=0,this.$.authenticationWizard.classList.remove("step2"),this.$.authenticationWizard.classList.remove("step3")},_active2:function(){this.$.progress.querySelector("li:first-child").setAttribute("done",!0),this.$.progress.querySelector("li:first-child").removeAttribute("active",!0),this.$.progress.querySelector("li:nth-child(2)").setAttribute("active",!0),this.$.progress.querySelector("li:nth-child(2)").removeAttribute("done",!0),this.$.progress.querySelector("li:last-child").removeAttribute("active",!0),this.$.progress.querySelector("li:last-child").removeAttribute("done",!0),this.$.progressBar.value=50,this.$.authenticationWizard.classList.remove("step3"),this.$.authenticationWizard.classList.add("step2")},_active3:function(){this.$.progress.querySelector("li:first-child").setAttribute("done",!0),this.$.progress.querySelector("li:first-child").removeAttribute("active",!0),this.$.progress.querySelector("li:nth-child(2)").setAttribute("done",!0),this.$.progress.querySelector("li:nth-child(2)").removeAttribute("active",!0),this.$.progress.querySelector("li:last-child").setAttribute("active",!0),this.$.progressBar.value=100,this.$.authenticationWizard.classList.remove("step2"),this.$.authenticationWizard.classList.add("step3")},properties:{account2faApi:{type:String,value:""},account2faQrApi:{type:String,value:""},authorizationToken:{type:String},qrCode:{type:String,value:function(){return""}},qrSecret:{type:String,value:function(){return""}}},attached:function(){var e=document.createElement("iron-request"),t=this.account2faQrApi,i=this,r={url:t,method:"GET",handleAs:"json",headers:{Authorization:"token "+this.authorizationToken}};e.send(r).then(function(t){i.qrCode=e.response.qr,i.qrSecret=e.response.secret})},listeners:{"neon-animation-finish":"_onAnimationFinish","account2fa-api-changed":"_refreshQR"},_onAnimationFinish:function(e){},_activate:function(){var e=document.createElement("iron-request"),t=this.account2faApi,i=this,r=this.$.verificationCode.value,o={url:t,method:"POST",handleAs:"json",body:"two_factor%5BgoogleAuthenticatorSecret%5D="+i.qrSecret+"&two_factor%5Bkey%5D="+r,headers:{Authorization:"token "+this.authorizationToken,"Content-Type":"application/x-www-form-urlencoded"}};e.send(o).then(function(e){i.fire("twofa-enabled")},function(){i.$.verificationCode.errorMessage="Invalid code please try again.",i.$.verificationCode.invalid=!0})},_inputFocused:function(){this.$.verificationCode.errorMessage="Digits only!",this.$.verificationCode.invalid=!1}});</script>
</dom-module>
<dom-module id="appsco-account-2fa-page" assetpath="account/">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                @apply(--full-page);

                --paper-card-header: {
                     border-bottom: 1px solid var(--divider-color);
                 };
            }
            :host paper-card {
                @apply(--full-page-paper-card);
            }
            .page-close-action {
                @apply(--page-close-action);
            }
            :host([mobile-screen]) {
                --account-2fa-enable-setup-icon: {
                     width: 32px;
                     height: 32px;
                     margin: 8px;
                 };
            }
        </style>

        <iron-media-query query="(max-width: 600px)" query-matches="{{ mobileScreen }}"></iron-media-query>

        <paper-card heading="Two-factor authentication" id="card">
            <paper-icon-button icon="close" title="Close" class="page-close-action" on-tap="_back"></paper-icon-button>

            <div class="card-content layout vertical">

                <appsco-account-2fa-enable id="appscoAccount2FA" authorization-token="[[ authorizationToken ]]" account2fa-api="[[ twoFaApi ]]" account2fa-qr-api="[[ twoFaQrApi ]]"></appsco-account-2fa-enable>
            </div>
        </paper-card>

    </template>

    <script>Polymer({is:"appsco-account-2fa-page",properties:{account:{type:Object,value:function(){return{}},notify:!0},authorizationToken:{type:String},twoFaApi:{type:String,notify:!0},twoFaQrApi:{type:String,notify:!0},animationConfig:{value:function(){return{entry:[{name:"hero-animation",id:"hero",toPage:this,timing:{duration:300}},{name:"fade-in-animation",node:this,timing:{duration:500}}],exit:{name:"slide-right-animation",node:this,timing:{duration:200}}}}},sharedElements:{value:function(){return{hero:this.$.card}}},mobileScreen:{type:Boolean,value:!1,reflectToAttribute:!0}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],_back:function(){this.fire("back")}});</script>
</dom-module>

<dom-module id="appsco-account-2fa-manage" assetpath="account/">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                @apply(--full-page);

                --paper-card-header: {
                    border-bottom: 1px solid var(--divider-color);
                };
            }
            :host paper-card {
                @apply(--full-page-paper-card);
            }
            .page-close-action {
                @apply(--page-close-action);
            }
            :host .danger {
                color: var(--app-danger-color);
            }
            :host ul li {
                float: left;
                margin-right:20px;
                width: 70px;
            }
        </style>

        <paper-card heading="Two-factor authentication" id="card">
            <paper-icon-button icon="close" title="Close" class="page-close-action" on-tap="_back"></paper-icon-button>

            <div class="card-content layout vertical">

                <p>
                    <iron-icon icon="icons:check"></iron-icon>Two-factor authentication is currently enabled
                    <paper-button class="danger" on-tap="_disable">Disable</paper-button>
                </p>
                <p>
                    </p><h2>Recovery codes</h2>

                    Recovery codes can be used to access your account in the event you lose access to your device and cannot
                    receive two-factor authentication codes.
                    Appsco Support cannot restore access to your accounts with
                    two-factor authentication enabled for security reasons.
                    Saving your recovery codes in a safe place can keep you from being locked out of your account.
                <p></p>
                <paper-button on-tap="_toggleRecoveryCodes">VIEW RECOVERY CODES</paper-button>
                <div hidden="[[ recoveryCodes ]]">
                    <ul>
                        <template is="dom-repeat" items="{{ _codes }}">
                            <li>[[ item ]]</li>
                        </template>
                    </ul>
                </div>
            </div>
        </paper-card>

    </template>

    <script>Polymer({is:"appsco-account-2fa-manage",properties:{account:{type:Object,value:function(){return{}},notify:!0},authorizationToken:{type:String},twoFaApi:{type:String,notify:!0},twoFaQrApi:{type:String,notify:!0},twoFaCodesApi:{type:String,notify:!0},_codes:{type:Array,value:function(){return[]}},recoveryCodes:{type:Boolean,value:!0},animationConfig:{value:function(){return{entry:[{name:"hero-animation",id:"hero",toPage:this,timing:{duration:300}},{name:"fade-in-animation",node:this,timing:{duration:500}}],exit:{name:"slide-right-animation",node:this,timing:{duration:200}}}}},sharedElements:{value:function(){return{hero:this.$.card}}}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],_back:function(){this.fire("back")},_toggleRecoveryCodes:function(){if(this._codes.length>0)return void(this.recoveryCodes=!this.recoveryCodes);var e=document.createElement("iron-request"),t=this.twoFaCodesApi,n=this,o={url:t,method:"GET",handleAs:"json",headers:{Authorization:"token "+this.authorizationToken}};e.send(o).then(function(t){n.set("_codes",e.response),n.recoveryCodes=!n.recoveryCodes},function(){})},_disable:function(){var e=document.createElement("iron-request"),t=this.twoFaApi,n=this,o={url:t,method:"DELETE",handleAs:"json",headers:{Authorization:"token "+this.authorizationToken}};e.send(o).then(function(e){n.fire("twofa-disabled")},function(){})}});</script>
</dom-module>

<dom-module id="appsco-account-authorized-apps-page" assetpath="account/">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                @apply(--full-page);

                --paper-card-header: {
                     border-bottom: 1px solid var(--divider-color);
                 };

                --account-authorized-apps-container: {
                     padding-top: 0;
                 };

                --account-authorized-app-first: {
                     border-top: none;
                 };
            }
            :host paper-card {
                @apply(--full-page-paper-card);
            }
            .page-close-action {
                @apply(--page-close-action);
            }
        </style>

        <paper-card heading="Authorized applications" id="card">
            <paper-icon-button icon="close" title="Close" class="page-close-action" on-tap="_back"></paper-icon-button>

            <div class="card-content layout vertical">

                <appsco-account-authorized-apps id="appscoAccountAuthorizedApps" account="[[ account ]]" authorization-token="[[ authorizationToken ]]" authorized-apps-api="[[ authorizedAppsApi ]]" size="5" load-more="" on-revoke-application="_onRevokeApplication">
                </appsco-account-authorized-apps>

            </div>
        </paper-card>

    </template>

    <script>Polymer({is:"appsco-account-authorized-apps-page",properties:{account:{type:Object,value:function(){return{}},notify:!0},authorizationToken:{type:String},authorizedAppsApi:{type:String},animationConfig:{value:function(){return{entry:[{name:"hero-animation",id:"hero",toPage:this,timing:{duration:300}},{name:"fade-in-animation",node:this,timing:{duration:500}}],exit:{name:"slide-right-animation",node:this,timing:{duration:200}}}}},sharedElements:{value:function(){return{hero:this.$.card}}}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],attached:function(){this.$.appscoAccountAuthorizedApps.loadAuthorizedApps()},loadAuthorizedApps:function(){this.$.appscoAccountAuthorizedApps.loadAuthorizedApps()},_back:function(){this.fire("back")}});</script>
</dom-module>

<dom-module id="appsco-account-transfer-token" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: block;
                position: relative;
            @apply(--appsco-account-change-password);

            --appsco-loader: {
                 width: 16px;
                 height: 16px;
             };
            }
            :host .headline {
            @apply(--paper-font-headline);
                margin: 0 0 10px;
            }
            :host p {
                line-height: 1.4;
                margin: 8px 0;
            }
            :host form {
                position: relative;
            }
            :host .submit-button {
                margin: 10px 0;
                padding: 6px 12px;
                background-color: #34c2d7;
                color: #ffffff;
            }
            :host .token {
                max-width: 500px;
                padding: 6px 30px 6px 6px;
                height: 18px;
            @apply(--paper-font-common-nowrap);
                color: var(--secondary-text-color, #eeeeee);
                font-size: 14px;
                font-style: italic;
            @apply(--shadow-elevation-2dp);
                border-radius: 2px;
                position: relative;
                display: none;
            }
            :host appsco-copy {
                position: absolute;
                top: 0;
                right: 0;
            --paper-icon-button: {
                 width: 32px;
                 height: 32px;
             };
            }
        </style>

        <template is="dom-if" if="[[ _partnerExists ]]">
            <h3 class="headline">Your partner is [[ partner.company_name ]].</h3>
            <p>If you would like to switch partner please generate transfer token and provide it to your new partner.</p>
        </template>
        <p>
            Transfer token enables appsco partner to add you as a customer.
            <br>
            Once you generate the code, it will be active for short period of time.
            If you dont provide code to your partner within 24 hours it becomes inactive and you would need to generate another one.
            Once transfer token is used it will become inactive.
        </p>

        <form is="iron-form" id="accountTransferTokenForm" method="GET" action="[[ accountTransferTokenApi ]]" headers="{{ _computedHeaders }}" on-iron-form-presubmit="_onFormPresubmit" on-iron-form-error="_onFormError" on-iron-form-response="_onFormResponse">

            

            <paper-button id="submit" class="submit-button" on-tap="_submitForm">
                <appsco-loader active="[[ _loader ]]" loader-alt="Appsco is saving application" multi-color=""></appsco-loader>
                Generate token</paper-button>
        </form>

        <div id="token" class="token">
            [[ _token ]]
            <appsco-copy value="[[ _token ]]"></appsco-copy>
        </div>

    </template>
    <script>Polymer({is:"appsco-account-transfer-token",properties:{partner:{type:Object,value:function(){return{}}},_partnerExists:{type:Boolean,computed:"_computePartner(partner)"},authorizationToken:{type:String},accountTransferTokenApi:{type:String},_token:{type:String},_tokenGenerated:{type:Boolean,value:!1},_computedHeaders:{type:Object,computed:"_computeHeaders(authorizationToken)"},_loader:{type:Boolean,value:!1},_error:{type:String},animationConfig:{value:function(){return{entry:{name:"fade-in-animation",node:this.$.token,timing:{duration:300}},exit:{name:"fade-out-animation",node:this.$.token,timing:{duration:100}}}}}},behaviors:[Polymer.NeonAnimationRunnerBehavior],_computePartner:function(e){for(key in e)return!0;return!1},_computeHeaders:function(e){return{Authorization:"token "+e}},_submitForm:function(){this.$.accountTransferTokenForm.submit()},_onFormPresubmit:function(e){this._loader=!0},_onFormError:function(e){this._error=e.detail.error.message,this._loader=!1},_onFormResponse:function(e){this._token=e.detail.response.transfer_token,this._tokenGenerated||(this._tokenGenerated=!0,setTimeout(function(){this.$.token.style.display="block",this.playAnimation("entry")}.bind(this),200)),this.fire("token-generated"),this._loader=!1},reset:function(){this.$.token.style.display="none",this._token="",this._tokenGenerated=!1,this._error=""}});</script>
</dom-module>
<dom-module id="appsco-account-transfer-token-page" assetpath="account/">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                @apply(--full-page);
                --paper-card-header: {
                     border-bottom: 1px solid var(--divider-color);
                 };

                --appsco-copy-action: {
                     width: 32px;
                     height: 32px;
                     padding: 8px;
                     margin: 0;
                 };
            }
            :host paper-card {
                @apply(--full-page-paper-card);
            }
            .page-close-action {
                @apply(--page-close-action);
            }
        </style>

        <paper-card heading="Partner" id="card">
            <paper-icon-button icon="close" title="Close" class="page-close-action" on-tap="_back"></paper-icon-button>

            <div class="card-content layout vertical">

                <appsco-account-transfer-token id="appscoAccountTransferToken" partner="[[ partner ]]" authorization-token="[[ authorizationToken ]]" account-transfer-token-api="[[ transferTokenApi ]]"></appsco-account-transfer-token>

            </div>
        </paper-card>

    </template>

    <script>Polymer({is:"appsco-account-transfer-token-page",properties:{partner:{type:Object,value:function(){return{}}},authorizationToken:{type:String},transferTokenApi:{type:String},animationConfig:{value:function(){return{entry:[{name:"hero-animation",id:"hero",toPage:this,timing:{duration:300}},{name:"fade-in-animation",node:this,timing:{duration:500}}],exit:{name:"slide-right-animation",node:this,timing:{duration:200}}}}},sharedElements:{value:function(){return{hero:this.$.card}}}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],_back:function(){this.fire("back")},resetPage:function(){this.$.appscoAccountTransferToken.reset()}});</script>
</dom-module>

<dom-module id="appsco-account-change-password" assetpath="../bower_components/appsco-account/">
    <template>
        <style>
            :host {
                display: block;
                position: relative;
            @apply(--appsco-account-change-password);
            }
            :host .submit-button {
                margin: 20px 0 0 0;
            }
        </style>

        <appsco-loader active="[[ _loader ]]" loader-alt="Appsco is processing request" multi-color=""></appsco-loader>

        <appsco-form-error message="[[ _error ]]"></appsco-form-error>

        <form is="iron-form" id="accountChangePasswordForm" method="POST" action="[[ accountChangePasswordApi ]]" headers="[[ _computedHeaders ]]" on-iron-form-presubmit="_onFormPresubmit" on-iron-form-error="_onFormError" on-iron-form-response="_onFormResponse">

            <paper-input id="oldPassword" name="change_password[oldPassword]" label="Old password" type="password" required="" auto-validate="" error-message="Please type in old password." on-keyup="_validateForm"></paper-input>

            <paper-input id="newPassword" name="change_password[newPassword][plainPassword][first]" label="New password" type="password" required="" error-message="Please type in new password." on-keyup="_validateForm"></paper-input>

            <paper-input id="newPasswordRepeat" name="change_password[newPassword][plainPassword][second]" label="Repeat new password" type="password" required="" error-message="Please repeat new password." on-keyup="_validateForm"></paper-input>
        </form>

        <paper-button id="submit" class="submit-button" on-tap="_submitForm">Save</paper-button>

        <iron-a11y-keys target="[[ _target ]]" keys="enter" on-keys-pressed="_onEnter">
        </iron-a11y-keys>

    </template>
    <script>Polymer({is:"appsco-account-change-password",properties:{authorizationToken:{type:String},accountChangePasswordApi:{type:String},_computedHeaders:{type:Object,computed:"_computeHeaders(authorizationToken)"},_loader:{type:Boolean,value:!1},_error:{type:String},_validForm:{type:Boolean,value:!0},_target:{type:Object,value:function(){return this.$.accountChangePasswordForm}}},_computeHeaders:function(e){return{Authorization:"token "+e}},_onEnter:function(){this._submitForm()},_submitForm:function(){this._validForm=!this.$.newPassword.invalid&&!this.$.newPasswordRepeat.invalid,this._validForm&&this.$.accountChangePasswordForm.submit()},_validateForm:function(){var e=this.$.newPassword,t=""==e.value.trim()?null:e.value,o=this.$.newPasswordRepeat,r=""==o.value.trim()?null:o.value;t&&(t.length<8?(e.errorMessage="Password must be at least 8 characters long.",e.invalid=!0):t.match(new RegExp("[A-Z]"))?t.match(new RegExp("[0-9]"))?t==this.$.oldPassword.value?(e.errorMessage="New password must be different from old one.",e.invalid=!0):e.invalid=!1:(e.errorMessage="Password must have at least one digital letter.",e.invalid=!0):(e.errorMessage="Password must have at least one capital letter.",e.invalid=!0)),t&&r&&t!==r?(o.errorMessage="This has to be equal to new password.",o.invalid=!0):t===r&&(o.invalid=!1)},_onFormPresubmit:function(e){this._validForm&&(this._loader=!0)},_onFormError:function(e){this._error=e.detail.error.message,this._loader=!1},_onFormResponse:function(){this.$.accountChangePasswordForm.reset(),this.fire("password-changed"),this._loader=!1},setUp:function(){this.$.oldPassword.focus()},reset:function(){this.$.accountChangePasswordForm.reset(),this._error=""}});</script>
</dom-module>
<dom-module id="appsco-account-change-password-page" assetpath="account/">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                @apply(--full-page);

                --paper-card-header: {
                     border-bottom: 1px solid var(--divider-color);
                 };
            }
            :host paper-card {
                @apply(--full-page-paper-card);
            }
            .page-close-action {
                @apply(--page-close-action);
            }
            appsco-account-change-password {
                --paper-button: {
                     padding: 4px 8px;
                    background-color: var(--app-primary-color);
                    color: #ffffff;
                 };
            }
        </style>

        <paper-card heading="Change password" id="card">
            <paper-icon-button icon="close" title="Close" class="page-close-action" on-tap="_back"></paper-icon-button>

            <div class="card-content layout vertical">
                <appsco-account-change-password id="appscoAccountChangePassword" authorization-token="[[ authorizationToken ]]" account-change-password-api="[[ changePasswordApi ]]"></appsco-account-change-password>
            </div>
        </paper-card>

    </template>

    <script>Polymer({is:"appsco-account-change-password-page",properties:{authorizationToken:{type:String},changePasswordApi:{type:String},animationConfig:{value:function(){return{entry:[{name:"hero-animation",id:"hero",toPage:this,timing:{duration:300}},{name:"fade-in-animation",node:this,timing:{duration:500}}],exit:{name:"slide-right-animation",node:this,timing:{duration:200}}}}},sharedElements:{value:function(){return{hero:this.$.card}}}},behaviors:[Polymer.NeonSharedElementAnimatableBehavior],_back:function(){this.fire("back")},setPage:function(){this.$.appscoAccountChangePassword.setUp()},resetPage:function(){this.$.appscoAccountChangePassword.reset()}});</script>
</dom-module>

</div><dom-module id="appsco-account-page">
    <template>
        <style include="webkit-scrollbar-style">
            :host {
                display: block;
                color: #000;

                --appsco-content-sections: {
                     padding: 0;
                 };

                --resource-width: 300px;
            }
            :host paper-icon-button::shadow paper-ripple {
                width: 150%;
                height: 150%;
                top: -25%;
                left: -25%;
            }
            :host div[resource] {
                padding: 10px;
            }
            :host div[content] {
                height: 100%;
            }
            :host .account-components, :host .account-components neon-animated-pages {
                height: 100%;
            }
            appsco-account-components-page {
                padding: 10px;
            }
            appsco-account-image-settings {
                display: block;
            }
            .resource-header {
                padding: 20px 10px 30px;
                border-bottom: 1px solid var(--divider-color);
                position: relative;
            }
            .resource-header .action-share {
                color: var(--app-secondary-color);
                position: absolute;
                top: 0;
                right: 0;
            }
            .account-image {
                width: 64px;
                height: 64px;
                margin: 0 auto;
                border-radius: 50%;
                display: block;
            }
            .account-info {
                margin-top: 10px;
                font-size: 14px;
            }
            .account-info p {
                margin: 4px 0;
            }
            .account-managed-by, .account-partner-info {
                margin-top: 10px;
            }
            div[resource] .resource-actions {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
            }
            :host .change-password-button {
                @apply(--primary-button);
                @apply(--secondary-button);
                border-radius: 0;
            }
            :host .flex-horizontal {
                @apply(--layout-horizontal);
                @apply(--layout-center);
            }
            :host .flex-vertical {
                @apply(--layout-vertical);
            }
            :host .flex {
                @apply(--layout-flex);
            }
            :host([medium-screen]) {
                --resource-width: 240px;
            }
            :host([mobile-screen]) {
                --resource-width: 180px;
            }
            .change-password-hero {
                position: fixed;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                margin: auto;
                width: 100px;
                height: 100px;
                opacity: 0;
                visibility: hidden;
            }
            .additional-info {
                font-size: 12px;
                color: var(--secondary-text-color);
                text-align: center;
            }
            hr {
                height: 1px;
                margin: 4px 0;
                border: none;
                background-color: var(--divider-color);
            }
        </style>

        <iron-media-query query="(max-width: 1200px)" query-matches="{{ mediumScreen }}"></iron-media-query>
        <iron-media-query query="(max-width: 800px)" query-matches="{{ tabletScreen }}"></iron-media-query>
        <iron-media-query query="(max-width: 600px)" query-matches="{{ mobileScreen }}"></iron-media-query>

        <iron-ajax auto="" url="[[ partnerApi ]]" on-response="_onPartnerResponse" headers="{{ _computedHeaders }}">
        </iron-ajax>

        <appsco-content id="appscoContent" resource-active="">

            <div class="flex-vertical" resource="">

                <div class="resource-header">
                    <appsco-account-image-settings id="appscoAccountImageSettings" account="{{ account }}" authorization-token="[[ authorizationToken ]]" image-settings-api="[[ imageSettingsApi ]]">
                    </appsco-account-image-settings>
                </div>

                <div class="account-info">
                    <template is="dom-if" if="[[ _accountName ]]">
                        <div class="account-name">[[ _accountName ]]</div>
                    </template>

                    <div class="account-email">[[ account.email ]]</div>

                    <template is="dom-if" if="[[ account.company ]]">
                        <hr>
                        <div class="account-managed-by">
                            <p>Managed by: [[ account.company.name ]]</p>
                        </div>
                    </template>

                    <template is="dom-if" if="[[ _partner.company_name ]]">
                        <hr>
                        <div class="account-partner-info">
                            <p>Partner: [[ _partner.company_name ]]</p>
                        </div>
                    </template>
                </div>

                <div class="resource-actions flex-horizontal">
                    <paper-button class="change-password-button flex" on-tap="_onChangePassword">
                        Change password
                    </paper-button>
                </div>

            </div>

            <div content="">

                <div class="account-components">
                    <neon-animated-pages class="flex" selected="{{ _selected }}" attr-for-selected="name" on-neon-animation-finish="_onPageAnimationFinish">

                        <appsco-account-components-page id="appscoAccountComponentsPage" name="appsco-account-components-page" account="{{ account }}" partner="{{ _partner }}" authorization-token="[[ authorizationToken ]]" notifications-api="[[ notificationsApi ]]" authorized-apps-api="[[ authorizedAppsApi ]]" log-api="[[ logApi ]]" two-fa-api="[[ twoFaApi ]]" two-fa-qr-api="[[ twoFaQrApi ]]" on-account-settings="_onAccountSettings" on-2fa-enable="_on2FAEnable" on-2fa-manage="_on2FAManage" on-all-notifications="_onAllNotifications" on-manage-authorized-apps="_onManageAuthorizedApps" on-whole-log="_onWholeLog" on-manage-partner="_onManagePartner" on-log-loaded="_pageLoaded" on-log-empty="_pageLoaded">
                        </appsco-account-components-page>

                        <appsco-account-settings-page name="appsco-account-settings-page" account="{{ account }}" authorization-token="[[ authorizationToken ]]" settings-api="[[ settingsApi ]]" image-settings-api="[[ imageSettingsApi ]]" on-settings-saved="_onSettingsSaved" on-back="_onResourceBack">
                        </appsco-account-settings-page>

                        <appsco-account-2fa-page name="appsco-account-2fa-page" account="{{ account }}" two-fa-api="[[ twoFaApi ]]" two-fa-qr-api="[[ twoFaQrApi ]]" authorization-token="[[ authorizationToken ]]" on-back="_onResourceBack" on-twofa-enabled="_onTwoFaEnabled"></appsco-account-2fa-page>

                        <appsco-account-2fa-manage name="appsco-account-2fa-manage" account="{{ account }}" two-fa-api="[[ twoFaApi ]]" two-fa-codes-api="[[ twoFaCodesApi ]]" authorization-token="[[ authorizationToken ]]" on-back="_onResourceBack" on-twofa-disabled="_onTwoFaDisabled"></appsco-account-2fa-manage>

                        <appsco-account-notifications-page name="appsco-account-notifications-page" account="{{ account }}" authorization-token="[[ authorizationToken ]]" notifications-api="[[ notificationsApi ]]" on-back="_onResourceBack">
                        </appsco-account-notifications-page>

                        <appsco-account-authorized-apps-page id="appscoAccountAuthorizedAppsPage" name="appsco-account-authorized-apps-page" account="{{ account }}" authorization-token="[[ authorizationToken ]]" authorized-apps-api="[[ authorizedAppsApi ]]" on-back="_onResourceBack">
                        </appsco-account-authorized-apps-page>

                        <appsco-account-log-page id="appscoAccountLogPage" name="appsco-account-log-page" account="{{ account }}" authorization-token="[[ authorizationToken ]]" log-api="[[ logApi ]]" on-back="_onResourceBack">
                        </appsco-account-log-page>

                        <appsco-account-transfer-token-page name="appsco-account-transfer-token-page" partner="[[ _partner ]]" authorization-token="[[ authorizationToken ]]" transfer-token-api="[[ transferTokenApi ]]" on-token-generated="_onTokenGenerated" on-back="_onResourceBack">
                        </appsco-account-transfer-token-page>

                        <appsco-account-change-password-page name="appsco-account-change-password-page" authorization-token="[[ authorizationToken ]]" change-password-api="[[ changePasswordApi ]]" on-password-changed="_onPasswordChanged" on-back="_onResourceBack">
                        </appsco-account-change-password-page>

                    </neon-animated-pages>
                </div>

            </div>
        </appsco-content>

        <div id="changePasswordHero" class="change-password-hero"></div>

    </template>

    <script>Polymer({is:"appsco-account-page",properties:{account:{type:Object,value:function(){return{}},notify:!0},_partner:{type:Object,value:function(){return{}}},authorizationToken:{type:String},notificationsApi:{type:String},authorizedAppsApi:{type:String},logApi:{type:String},twoFaApi:{type:String},twoFaQrApi:{type:String},twoFaCodesApi:{type:String},settingsApi:{type:String},imageSettingsApi:{type:String},transferTokenApi:{type:String},changePasswordApi:{type:String},partnerApi:{type:String},_computedHeaders:{type:Object,computed:"_computeHeaders(authorizationToken)"},_accountName:{type:String,computed:"_setAccountName(account)"},_selected:{type:String,value:"appsco-account-components-page",notify:!0},mediumScreen:{type:Boolean,value:!1,reflectToAttribute:!0},tabletScreen:{type:Boolean,value:!1,reflectToAttribute:!0},mobileScreen:{type:Boolean,value:!1,reflectToAttribute:!0},animationConfig:{value:function(){return{entry:{name:"fade-in-animation",node:this,timing:{duration:300}},exit:{name:"fade-out-animation",node:this,timing:{duration:200}}}}},showAllNotifications:{type:Boolean,value:!1,observer:"_observeSeeAllNotifications"},pageLoaded:{type:Boolean,value:!1}},behaviors:[Polymer.NeonAnimatableBehavior],observers:["_updateScreen(mediumScreen, tabletScreen, mobileScreen)"],attached:function(){this.pageLoaded=!1,(this.mobileScreen||this.tabletScreen||this.mediumScreen)&&this.updateStyles()},_updateScreen:function(e,t,n){this.updateStyles(),n?this.$.appscoContent.hideSection("resource"):this.$.appscoContent.resourceActive||this.$.appscoContent.showSection("resource")},_computeHeaders:function(e){return{Authorization:"token "+e}},_pageLoaded:function(){this.pageLoaded=!0,this.fire("page-loaded")},_observeSeeAllNotifications:function(e){e&&this.showAllApplications()},_onPartnerResponse:function(e){this._partner=e.detail.response},_setAccountName:function(e){var t=null;return""!=e.first_name&&(t=e.first_name+" "),""!=e.last_name&&(t+=e.last_name),t},_onResourceBack:function(){this._showAccountComponentsPage()},_onTwoFaEnabled:function(){this._showAccountComponentsPage(),this.refreshLog(),this.$.appscoAccountComponentsPage.load2FaApi()},_onTwoFaDisabled:function(){this._showAccountComponentsPage(),this.refreshLog(),this.$.appscoAccountComponentsPage.load2FaApi()},refreshLog:function(){this.$.appscoAccountComponentsPage.loadLog(),this.$.appscoAccountLogPage.loadLog()},_onSettingsSaved:function(){this._showAccountComponentsPage(),this.refreshLog()},_onTokenGenerated:function(){this.refreshLog()},_onPasswordChanged:function(){this._showAccountComponentsPage(),this.refreshLog()},onApplicationRevoked:function(){this.$.appscoAccountAuthorizedAppsPage.loadAuthorizedApps(),this.$.appscoAccountComponentsPage.loadAuthorizedApps(),this.refreshLog()},_showAccountComponentsPage:function(){this._enableAdvancedSettings(),this._selected="appsco-account-components-page"},showAllApplications:function(){this.$.appscoAccountComponentsPage.setSharedElement("notifications"),setTimeout(function(){this._onAllNotifications(),this.showAllNotifications=!1}.bind(this),50)},resetPage:function(){this.$.appscoAccountComponentsPage.hideAdvancedSettings(),this._showAccountComponentsPage()},toggleResource:function(){this.$.appscoContent.toggleSection("resource")},_onAccountAdvancedSettings:function(){this.$.appscoAccountComponentsPage.toggleAdvancedSettings(),this._showAccountComponentsPage()},_disableAdvancedSettings:function(){this.fire("disable-advanced-settings")},_enableAdvancedSettings:function(){this.fire("enable-advanced-settings")},_onAccountSettings:function(){this._disableAdvancedSettings(),this._selected="appsco-account-settings-page"},_on2FAEnable:function(){this._disableAdvancedSettings(),this._selected="appsco-account-2fa-page"},_on2FAManage:function(){this._disableAdvancedSettings(),this._selected="appsco-account-2fa-manage"},_onAllNotifications:function(){this._disableAdvancedSettings(),this._selected="appsco-account-notifications-page"},_onManageAuthorizedApps:function(){this._disableAdvancedSettings(),this._selected="appsco-account-authorized-apps-page"},_onWholeLog:function(){this._disableAdvancedSettings(),this._selected="appsco-account-log-page"},_onManagePartner:function(){this._disableAdvancedSettings(),this._selected="appsco-account-transfer-token-page"},_onChangePassword:function(){this._disableAdvancedSettings(),this.$.appscoAccountComponentsPage.sharedElements={hero:this.$.changePasswordHero},this._selected="appsco-account-change-password-page"},_onPageAnimationFinish:function(e){var t=e.detail.fromPage,n=e.detail.toPage;switch(t.getAttribute("name")){case"appsco-account-settings-page":case"appsco-account-transfer-token-page":case"appsco-account-change-password-page":t.resetPage()}switch(n.getAttribute("name")){case"appsco-account-settings-page":case"appsco-account-change-password-page":n.setPage()}}});</script>
</dom-module>
</body></html>