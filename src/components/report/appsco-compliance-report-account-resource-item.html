<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../../../bower_components/neon-animation/animations/fade-in-animation.html">
<link rel="import" href="../../../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../../../bower_components/paper-styles/typography.html">

<link rel="import" href="../components/appsco-list-item-behavior.html">
<link rel="import" href="../components/appsco-list-item-styles.html">
<link rel="import" href="../resource/appsco-resource-auth-type.html">

<dom-module id="appsco-compliance-report-account-resource-item">
    <template>
        <style include="appsco-list-item-styles">
            :host {
                @apply --appsco-compliance-report-account-resource;
            }
            .resource {
                @apply --layout-horizontal;
                @apply --layout-center;
                @apply --compliance-report-account-resource;
            }
            .resource-icon {
                @apply --layout-flex-none;
                width: 24px;
                height: 24px;
                margin-right: 5px;
            }
            .resource-title {
                @apply --layout-horizontal;
                width: 255px;
                overflow: hidden;
                margin-right: 10px;
                font-size: 14px;
                color: var(--primary-text-color);
            }
            .resource-compliance-fields {
                @apply --layout-flex-none;
                @apply --paper-font-common-nowrap;
                margin-right: 10px;
                font-size: 14px;
                color: var(--secondary-text-color);
            }
            appsco-resource-auth-type {
                @apply --layout-flex-none;
                @apply --paper-font-common-nowrap;
                color: var(--secondary-text-color);
            }
        </style>

        <div class="resource">
            <iron-image class="resource-icon"
                        sizing="cover"
                        src="[[ item.application_url ]]"></iron-image>
            <span class="resource-title">[[ item.title ]]</span>
            <span class="resource-compliance-fields">[[ fields ]]</span>
        </div>
    </template>

    <script>
        class AppscoComplianceReportAccountResourceItem extends Polymer.mixinBehaviors([
            Polymer.NeonAnimationRunnerBehavior,
            Polymer.AppscoListItemBehavior
        ], Polymer.Element) {
            static get is() { return 'appsco-compliance-report-account-resource-item'; }

            static get properties() {
                return {
                    item: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    },

                    fields: {
                        type: String,
                        computed: '_computeFields(item)'
                    }
                };
            }

            _computeFields(item) {
                return item && item.compliance && item.compliance.fields
                        ? item.compliance.fields
                        : 'none';
            }
        }
        window.customElements.define(AppscoComplianceReportAccountResourceItem.is, AppscoComplianceReportAccountResourceItem);
    </script>
</dom-module>
