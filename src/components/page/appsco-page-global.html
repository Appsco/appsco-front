<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/iron-icons/av-icons.html">

<!--
`appsco-page-global`

Is used to present global actions for page. These actions can be: info, help, sort, settings.
Actions are treated as events only.
Actions are not tightly coupled to page content, page is delegated to react on their events.

    <appsco-page-global info help settings sort></appsco-page-global>

### Styling

`<appsco-page-global>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--appsco-page-global-action-color` | Color for action icons | `{}`
`--appsco-page-global` | Mixin applied to host container | `{}`
`--global-action` | Mixin applied to action's container | `{}`
`--appsco-icon-active` | Mixin applied to active icons | `{}`

@demo demo/appsco-page-global.html
-->

<dom-module id="appsco-page-global">
    <template>
        <style is="custom-style">
            :host {
                display: inline-block;
                margin-right: -20px;
                @apply(--layout-horizontal);
                @apply(--layout-center);
                @apply(--layout-end-justified);

                --paper-icon-button-ink-color: var(--appsco-page-global-action-color);

                @apply(--appsco-page-global);
            }
            :host *[hidden] {
                display: none;
            }
            :host .action {
                margin-right: 10px;
                position: relative;
                @apply(--layout-vertical);
                @apply(--layout-center);
                @apply(--global-action);
            }
            :host paper-icon-button {
                color: var(--appsco-page-global-action-color);
            }
            :host paper-icon-button[active] {
                @apply(--appsco-icon-active);
            }
            :host .expand-icon {
                width: 32px;
                height: 32px;
                transition: transform 0.2s linear;
            }
            :host .expand-icon[active] {
                transform: rotate(180deg);
                transition: transform 0.3s linear;
            }
            :host paper-icon-button::shadow paper-ripple {
                width: 150%;
                height: 150%;
                top: -25%;
                left: -25%;
            }
            .flex-none {
                @apply(--layout-flex-none);
            }
        </style>

        <!--<template is="dom-if" if="[[ sort ]]">-->
        <!--<paper-icon-button icon="av:sort-by-alpha" on-tap="_sort" toggles></paper-icon-button>-->
        <!--</template>-->
        <!--<template is="dom-if" if="[[ settings ]]">-->
        <!--<paper-icon-button icon="icons:settings" on-tap="_settings" toggles></paper-icon-button>-->
        <!--</template>-->

        <template is="dom-if" if="[[ additionalOptions ]]">
            <div class="action flex-none">
                <paper-icon-button icon="icons:expand-more"
                                   class="expand-icon"
                                   on-tap="_onAdditionalOptionsAction"
                                   toggles></paper-icon-button>
            </div>
        </template>

        <template is="dom-if" if="[[ filters ]]">
            <div class="action flex-none">
                <paper-icon-button icon="icons:filter-list" on-tap="_onFilters" toggles></paper-icon-button>
            </div>
        </template>

        <template is="dom-if" if="[[ info ]]">
            <div class="action flex-none">
                <paper-icon-button icon="icons:info-outline" on-tap="_info" toggles></paper-icon-button>
            </div>
        </template>

        <!--<template is="dom-if" if="[[ help ]]">-->
        <!--<paper-icon-button icon="icons:help-outline" on-tap="_help" toggles></paper-icon-button>-->
        <!--</template>-->

    </template>

    <script>
        Polymer({

            is: 'appsco-page-global',

            properties: {
                /**
                 * Show info icon
                 *
                 * @type Boolean
                 */
                info: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Show help icon
                 *
                 * @type Boolean
                 */
                help: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Show settings icon
                 *
                 * @type Boolean
                 */
                settings: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Show sort icon
                 *
                 * @type Boolean
                 */
                sort: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Show filters action
                 *
                 * @type Boolean
                 */
                filters: {
                    type: Boolean,
                    value: false
                },

                additionalOptions: {
                    type: Boolean,
                    value: false
                }
            },

            _info: function (e) {
                /**
                 * Fired when `info` is tapped.
                 *
                 * @event page-global-info
                 * @param {Boolean} active Is element active
                 */
                this.fire('page-global-info', {
                    active: e.currentTarget.active
                });
            },

            _settings: function (e) {
                /**
                 * Fired when `settings` is tapped.
                 *
                 * @event page-global-settings
                 * @param {Boolean} active Is element active
                 */
                this.fire('page-global-settings', {
                    active: e.currentTarget.active
                });
            },

            _sort: function (e) {
                /**
                 * Fired when `sort` is tapped.
                 *
                 * @event page-global-sort
                 * @param {Boolean} active Is element active
                 */
                this.fire('page-global-sort', {
                    active: e.currentTarget.active
                });
            },

            _help: function (e) {
                /**
                 * Fired when `help` is tapped.
                 *
                 * @event page-global-help
                 * @param {Boolean} active Is element active
                 */
                this.fire('page-global-help', {
                    active: e.currentTarget.active
                });
            },

            _onFilters: function() {

                /**
                 * Fired when filters action is tapped.
                 *
                 * @event page-global-filters
                 */
                this.fire('page-global-filters');
            },

            _onAdditionalOptionsAction: function() {

                /**
                 * Fired when additional options action is tapped.
                 *
                 * @event page-global-toggle-additional-options
                 */
                this.fire('page-global-toggle-additional-options');
            }
        });
    </script>
</dom-module>
