<link rel="import" href="../polymer/polymer.html">

<!--
`appsco-api`
appsco-api is element that holds overlay and loader.

Example:

      <appsco-api></appsco-api>

@demo demo/appsco-api.html
-->

<dom-module id="appsco-api">
    <template>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'appsco-api',

        properties: {
            domain: {
                type: String,
                value: "https://appsco.com",
                reflectToAttribute: true
            },
            index: {
                type: String,
                value: ''
            },
            me: {
                type: String,
                computed: '_me(index, domain)'
            },
            dashboards: {
                type: String,
                computed: '_dashboards(index, domain)'
            },
            applicationTemplates: {
                type: String,
                computed: '_applicationTemplates(index, domain)'
            },
            notifications: {
                type: String,
                computed: '_notifications(index, domain)'
            },
            accounts: {
                type: String,
                computed: '_accounts(index, domain)'
            },
            applications: {
                type: String,
                computed: '_applications(index, domain)'
            },
            logout: {
                type: String,
                computed: '_logout(index, domain)'
            },

            authorizedApps: {
                type: String,
                computed: '_authorizedApps(index, domain)'
            },

            twoFA: {
                type: String,
                computed: '_twoFA(index, domain)'
            },

            transferToken: {
                type: String,
                computed: '_transferToken(index, domain)'
            },

            name: {
                type: Object,
                value: function () {
                    return {
                        me: this.me,
                        dashboards: this.dashboards,
                        applicationTemplates: this.applicationTemplates,
                        notifications: this.notifications,
                        accounts: this.accounts,
                        applications: this.applications,
                        logout: this.logout,
                        authorizedApps: this.authorizedApps,
                        twoFA: this.twoFA,
                        transferToken: this.transferToken
                    }
                },
                notify: true
            }
        },
        attached: function () {
            this.name = {
                me: this.me,
                dashboards: this.dashboards,
                applicationTemplates: this.applicationTemplates,
                notifications: this.notifications,
                accounts: this.accounts,
                applications: this.applications,
                logout: this.logout,
                authorizedApps: this.authorizedApps,
                twoFA: this.twoFA,
                transferToken: this.transferToken
            };
        },
        _computeOrigin: function (domain, index) {
            return domain+'/'+(index == '' ? '' : index + '/' )+'api/v2';
        },
        _me: function (index, domain) {
            return this._computeOrigin(domain, index)+'/me';
        },
        _dashboards: function (index, domain) {
            return this._computeOrigin(domain, index)+'/dashboards';
        },
        _applicationTemplates: function (index, domain) {
            return this._computeOrigin(domain, index)+'/applications';
        },
        _notifications: function (index, domain) {
            return this._computeOrigin(domain, index)+'/notifications';
        },
        _accounts: function (index, domain) {
            return this._computeOrigin(domain, index)+'/accounts';
        },
        _applications: function (index, domain) {
            return this._computeOrigin(domain, index)+'/me/applications';
        },

        _logout: function (index, domain) {
            return domain + '/' + (index == '' ? '' : index + '/' ) + 'logout';
        },

        _authorizedApps: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/authorized-apps';
        },

        _twoFA: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/2fa';
        },

        _transferToken: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/transfer-token';
        }
    });
</script>
